/* ======= Base / Reset ligero ======= */
*, *::before, *::after { box-sizing: border-box; }
html, body { height: 100%; }
body{
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans", Ubuntu, Cantarell, Arial, "Helvetica Neue", sans-serif;
  color: #111827;
  background: #eee9e9;
  line-height: 1.45;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
img{ max-width:100%; display:block; }
a{ color:#7a4a2f; text-decoration:none; }
a:hover{ text-decoration:underline; }

/* ======= Paleta & Tokens ======= */
:root{
  --brand-700:#6e442a;
  --brand-600:#7a4a2f;
  --brand-500:#8b5e3c;
  --brand-200:#e9d9cd;
  --brand-50:#fbf7f3;

  --bg:#f8fafc;
  --surface:#ffffff;
  --border:#e5e7eb;
  --muted:#6b7280;
  --ok:#16a34a;
  --warn:#ca8a04;
  --danger:#b91c1c;
  --ring:#7a4a2f33;
  --shadow: 0 6px 18px rgba(17,24,39,.08);
  --radius: 14px;
  --pad: 1rem;
}

/* ======= Contenedor ======= */
.container{
  max-width:1100px;
  margin:0 auto;
  padding:0 1rem;
}

/* ======= Navbar ======= */
.navbar{
  position: sticky; top:0; z-index:40;
  background:var(--surface);
  border-bottom:1px solid var(--border);
  padding:.75rem 0;
  box-shadow:0 3px 10px rgba(17,24,39,.04);
  overflow:hidden; /* nunca rompas layout */
}
.navbar .row{ display:flex; gap:.75rem; align-items:center; flex-wrap:wrap; }
.navbar .brand{ font-weight:700; letter-spacing:.2px; color:var(--brand-700); }
.navbar nav{
  display:flex; gap:.75rem; align-items:center;
  margin-left:1rem;
  overflow-x:auto; -webkit-overflow-scrolling:touch; scrollbar-width:none; white-space:nowrap;
}
.navbar nav::-webkit-scrollbar{ display:none; }
.navbar a{ padding:.55rem .75rem; border-radius:10px; color:#374151; }
.navbar a.active, .navbar a:hover{ background:var(--brand-50); color:var(--brand-700); }
.navbar .spacer{ margin-left:auto; }

/* ======= Tipografía ======= */
h1,h2,h3{ line-height:1.2; margin:0 0 .6rem; }
h1{ font-size:clamp(1.6rem, 2.4vw, 2rem); }
h2{ font-size:clamp(1.25rem, 2vw, 1.5rem); color:#1f2937; }
h3{ font-size:1.1rem; color:#1f2937; }
.muted{ color:var(--muted); }

/* ======= Grid / Helpers ======= */
.section{ padding:1.25rem 0; }
.grid{ display:grid; gap:1rem; }
.grid-2{ grid-template-columns:repeat(2, minmax(0,1fr)); }
.grid-3{ grid-template-columns:repeat(3, minmax(0,1fr)); }
.grid-4{ grid-template-columns:repeat(4, minmax(0,1fr)); }
@media (max-width: 900px){ .grid-4{ grid-template-columns:repeat(2,1fr); } }
@media (max-width: 400px){
  .grid-3{ grid-template-columns:1fr; }
  .grid-2{ grid-template-columns:1fr; }
}

/* ======= Cards ======= */
.card{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  overflow:hidden;
}
.card .card-body{ padding:var(--pad); }
.card .card-title{ font-weight:700; margin-bottom:.35rem; }

/* ======= Botones ======= */
.btn{
  appearance:none; border:1px solid transparent; border-radius:12px;
  padding:.55rem .9rem; font-weight:600; cursor:pointer; line-height:1.1;
  transition:.15s ease-in-out; display:inline-flex; align-items:center; gap:.5rem;
  min-height:44px; /* tap área */
  font-size:1rem;
}
.btn:focus{ outline:none; box-shadow:0 0 0 4px var(--ring); }
.btn-primary{ background:var(--brand-600); color:#fff; }
.btn-primary:hover{ background:var(--brand-700); }
.btn-secondary{ background:#fff; border-color:var(--border); color:#374151; }
.btn-secondary:hover{ background:#f3f4f6; }
.btn-danger{ background:var(--danger); color:#fff; }
.btn-danger:hover{ filter:brightness(.95); }
.btn-ghost{ background:transparent; color:#374151; }
.btn-ghost:hover{ background:#f3f4f6; }
.btn-sm{ padding:.4rem .65rem; border-radius:10px; font-size:.92rem; }
.btn-block{ width:100%; justify-content:center; }

/* ======= Formularios ======= */
label{ display:block; font-weight:600; margin:.35rem 0 .25rem; color:#374151; }
input[type="text"],
input[type="email"],
input[type="number"],
input[type="password"],
input[type="date"],
select, textarea{
  width:100%; padding:.6rem .7rem; border-radius:12px; background:#fff; border:1px solid var(--border);
  transition:.12s ease-in-out;
}
textarea{ min-height:110px; }
input:focus, select:focus, textarea:focus{ outline:none; border-color:var(--brand-500); box-shadow:0 0 0 4px var(--ring); }
.form-row{ display:grid; gap:.75rem; grid-template-columns:repeat(2,1fr); }
@media (max-width:680px){ .form-row{ grid-template-columns:1fr; } }

.form-actions{ margin-top:.9rem; display:flex; gap:.5rem; flex-wrap:wrap; }

/* ======= Alertas ======= */
.alert{ padding:.7rem .9rem; border-radius:12px; border:1px solid transparent; }
.alert-ok{ background:#ecfdf5; border-color:#a7f3d0; color:#065f46; }
.alert-warn{ background:#fffbeb; border-color:#fde68a; color:#92400e; }
.alert-bad{ background:#fef2f2; border-color:#fecaca; color:#7f1d1d; }

/* ======= Tablas ======= */
.table{
  width:100%; border-collapse:collapse; background:var(--surface);
  border:1px solid var(--border); border-radius:var(--radius);
  overflow:hidden; box-shadow:var(--shadow);
}
.table th, .table td{ padding:.7rem .8rem; text-align:left; word-break:break-word; }
.table thead th{ background:var(--brand-50); color:#374151; font-weight:700; border-bottom:1px solid var(--border); }
.table tbody tr{ border-top:1px solid var(--border); }
.table tbody tr:hover{ background:#fafafa; }
.table .actions{ white-space:nowrap; display:flex; gap:.35rem; }

/* Contenedor para scroll horizontal */
.table-responsive{
  width:100%; overflow-x:auto; -webkit-overflow-scrolling:touch;
}
.table-responsive .table{
  box-shadow:none; border-radius:10px;
}

/* ======= Badges ======= */
.badge{
  display:inline-flex; align-items:center; gap:.35rem;
  font-size:.85rem; border-radius:999px; padding:.25rem .6rem; border:1px solid transparent;
}
.badge-ok{ background:#ecfdf5; color:#065f46; border-color:#bbf7d0; }
.badge-warn{ background:#fffbeb; color:#92400e; border-color:#fde68a; }
.badge-bad{ background:#fef2f2; color:#7f1d1d; border-color:#fecaca; }
.badge-neutral{ background:#eef2ff; color:#3730a3; border-color:#c7d2fe; }

/* ======= Tarjetas de producto ======= */
.product-card .thumb{
  width:100%; height:180px; border-bottom:1px solid var(--border);
  background:#f3f4f6; overflow:hidden; display:flex; align-items:center; justify-content:center;
}
.product-card .meta{ display:flex; justify-content:space-between; align-items:center; gap:.5rem; margin-top:.45rem; }
.product-card .thumb img{
  width:100%; height:100%; display:block; object-fit:cover; object-position:center; border:0;
}

/* ======= Paginación ======= */
.pagination{ display:flex; gap:.35rem; align-items:center; flex-wrap:wrap; }
.pagination a, .pagination span{
  padding:.4rem .65rem; border:1px solid var(--border); border-radius:10px; color:#374151; background:#fff;
}
.pagination .active{ background:var(--brand-600); color:#fff; border-color:transparent; }

/* ======= Footer ======= */
.footer{
  margin-top:2rem; padding:1.25rem 0;
  border-top:1px solid var(--border); color:var(--muted);
}

/* ======= Utilidades de espacio ======= */
.mt-1{ margin-top:.25rem; } .mt-2{ margin-top:.5rem; } .mt-3{ margin-top:.75rem; } .mt-4{ margin-top:1rem; }
.mb-1{ margin-bottom:.25rem; } .mb-2{ margin-bottom:.5rem; } .mb-3{ margin-bottom:.75rem; } .mb-4{ margin-bottom:1rem; }
.p-1{ padding:.25rem; } .p-2{ padding:.5rem; } .p-3{ padding:.75rem; } .p-4{ padding:1rem; }

/* ======= Flex helpers ======= */
.flex{ display:flex; } .items-center{ align-items:center; }
.justify-between{ justify-content:space-between; }
.gap-1{ gap:.25rem; } .gap-2{ gap:.5rem; } .gap-3{ gap:.75rem; }

/* ======= Modal ======= */
.modal{
  position:fixed; inset:0; background:rgba(0,0,0,.55);
  display:none; align-items:center; justify-content:center; padding:1rem;
}
.modal.open{ display:flex; }
.modal-dialog{
  background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow);
  width:min(100%, 980px); max-height:90vh; overflow:auto; position:relative;
}
.modal-close{
  position:absolute; top:.35rem; right:.5rem; border:none; background:transparent; font-size:2rem; line-height:1;
  cursor:pointer; color:#6b7280;
}
.modal-body{ padding:var(--pad); }

/* ======= Thumbs varias ======= */
.thumb-mini{ width:200px; height:140px; object-fit:cover; object-position:center; border:1px solid var(--border); border-radius:12px; background:#f3f4f6; display:block; }
.thumb-xs{ width:64px; height:48px; object-fit:cover; object-position:center; border:1px solid var(--border); border-radius:8px; background:#f3f4f6; display:block; }

/* ======= Dropdown ======= */
.dropdown{ position:relative; display:inline-block; }
.dropdown-toggle{ cursor:pointer; list-style:none; padding:.5rem .75rem; border-radius:.25rem; }
.dropdown[open] .dropdown-toggle, .dropdown.active .dropdown-toggle{ background:rgba(0,0,0,.06); }
.dropdown-menu{
  position:absolute; top:100%; left:0; min-width:220px; margin-top:.25rem; padding:.25rem 0;
  background:#fff; border:1px solid rgba(0,0,0,.1); border-radius:.35rem;
  box-shadow:0 8px 24px rgba(0,0,0,.12); z-index:1000;
  max-width:calc(100vw - 2rem); overflow-x:auto;
}
.dropdown-menu a, .dropdown-item{ display:block; padding:.5rem .75rem; text-decoration:none; color:inherit; white-space:nowrap; }
.dropdown-menu a:hover{ background:rgba(0,0,0,.05); }
.muted{ opacity:.6; cursor:default; }

/* ======= Auth center ======= */
.auth-center{ display:flex; align-items:center; justify-content:center; padding:2rem 1rem; }
.auth-center .card{ width:100%; max-width:520px; }

/* ============ MOBILE FIRST TUNING ============ */
/* 1) Tokens y container en móvil */
@media (max-width:400px){
  :root{ --pad:.9rem; --radius:12px; --shadow:0 4px 14px rgba(17,24,39,.07); }
  body{ line-height:1.5; }
  .container{ padding:0 .85rem; }
}

/* 2) Tipografía móvil */
@media (max-width:400px){
  h1{ font-size:clamp(1.25rem, 5vw, 1.6rem); }
  h2{ font-size:clamp(1.1rem, 4.5vw, 1.35rem); }
  h3{ font-size:1rem; }
  .muted{ font-size:.95rem; }
}

/* 3) Navbar aún más compacta en ≤480px */
@media (max-width:400px){
  .navbar a{ padding:.5rem .6rem; }
}

/* 4) Formularios y botones en móvil */
@media (max-width:400px){
  label{ margin:.4rem 0 .35rem; }
  input[type], select, textarea{ padding:.7rem .85rem; font-size:16px; } /* evita zoom iOS */
  .form-row{ grid-template-columns:1fr; gap:.85rem; }
  .btn{ width:100%; justify-content:center; }
  .form-actions{ flex-direction:column; align-items:stretch; }
}

/* 5) Cards & thumbs en móvil */
@media (max-width:480px){
  .card .card-body{ padding:calc(var(--pad) * .9); }
  .product-card .thumb{ height:150px; }
  .thumb-mini{ width:100%; height:120px; }
}

/* 6) Tablas: modo stacked opcional en ≤640px */
/* Usa <table class="table table-stacked"> y <td data-label="Columna"> */
@media (max-width:640px){
  .table.table-stacked thead{ display:none; }
  .table.table-stacked, .table.table-stacked tbody, .table.table-stacked tr, .table.table-stacked td{
    display:block; width:100%;
  }
  .table.table-stacked tr{
    border:1px solid var(--border); border-radius:12px; padding:.5rem .75rem; margin-bottom:.65rem; background:#fff;
  }
  .table.table-stacked td{
    border:0; padding:.35rem 0; display:flex; justify-content:space-between; border-bottom:1px solid #f0f0f0;
  }
  .table.table-stacked td:last-child{ border-bottom:none; }
  .table.table-stacked td::before{
    content:attr(data-label); display:block; font-weight:600; color:#6b7280; margin-right:.75rem;
  }
  .table.table-stacked .actions{ flex-direction:column; gap:.3rem; }
  .table.table-stacked .actions form{ display:block !important; }
}

/* 7) Modales: mejor en móvil */
@media (max-width:360px){
  .modal-dialog{ width:100%; max-height:92vh; border-radius:10px; }
}

/* 8) Helpers de visibilidad */
.hide-mobile{ display:none !important; }
@media (min-width:641px){ .hide-mobile{ display:initial !important; } }
.show-mobile{ display:initial !important; }
@media (min-width:641px){ .show-mobile{ display:none !important; } }


/* ===== Micro-breakpoints para teléfonos estrechos ===== */

/* 1) Teléfonos ≤ 380px (S25 en modo “360px”) */
@media (max-width: 380px){

  /* Tokens + respiración */
  :root{
    --pad: .75rem;
    --radius: 10px;
    --shadow: 0 3px 10px rgba(17,24,39,.07);
  }
  .container{ padding: 0 .6rem; }

  /* Navbar más compacta y segura */
  .navbar .brand{
    font-size: 1rem;
    letter-spacing: .1px;
    max-width: 40vw;            /* evita que el texto empuje al menú */
    overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
  }
  .navbar nav{ gap: .4rem; margin-left: .5rem; }
  .navbar a{ padding: .45rem .5rem; font-size: .95rem; }

  /* Titulares más pequeños */
  h1{ font-size: clamp(1.15rem, 6vw, 1.4rem); }
  h2{ font-size: clamp(1.0rem, 5vw, 1.2rem); }
  h3{ font-size: .95rem; }

  /* Botones e inputs */
  .btn{
    min-height: 40px;
    font-size: .95rem;
    padding: .5rem .7rem;
  }
  input[type], select, textarea{
    padding: .65rem .75rem;
    font-size: 16px; /* iOS no hace zoom */
  }
  .form-row{ grid-template-columns: 1fr; gap: .75rem; }
  .form-actions{ flex-direction: column; align-items: stretch; }

  /* Tarjetas */
  .card .card-body{ padding: calc(var(--pad) * .9); }

  /* Tablas compactas */
  .table th, .table td{
    padding: .55rem .6rem;
    font-size: .95rem;
    word-break: break-word;      /* correos largos */
  }
  .table .actions{
    gap: .3rem;
    flex-wrap: wrap;             /* para que no se desborde */
  }
  .table .actions .btn{
    flex: 1 1 auto;              /* que puedan ocupar ancho si hace falta */
  }

  /* Dropdowns que no se salgan */
  .dropdown-menu{
    max-width: calc(100vw - 1.2rem);
    left: 0;
    right: auto;
  }

  /* Stacked mode más legible en super estrecho (si lo usas) */
  .table.table-stacked td{
    padding: .3rem 0;
  }
  .table.table-stacked td::before{
    margin-bottom: .1rem;
  }
}

/* 2) Ultra-estrechos ≤ 340px (por si acaso) */
@media (max-width: 340px){
  .navbar a{ padding: .4rem .45rem; font-size: .9rem; }
  .btn{ min-height: 38px; font-size: .9rem; padding: .45rem .6rem; }
  .table th, .table td{ padding: .5rem .55rem; font-size: .9rem; }
}

/* Abreviaturas automáticas en nav para ≤380px */
@media (max-width: 380px){
  nav a[href$="usuarios"]::after{ content:"Usuarios"; }
  nav a[href$="usuarios"]{ font-size:.95rem; }

  /* Ejemplos con data-attrs para no depender de href */
  nav a[data-short]::after{ content: attr(data-short); }
  nav a[data-short]{ position:relative; }
  nav a[data-short] > *{ visibility: hidden; } /* oculta el texto real */
}

/* ========= NAV + TABLAS AJUSTE 360px ========= */
@media (max-width: 380px){
  /* Navbar más compacta */
  .navbar .row{ gap:.4rem; }
  .navbar .brand{
    font-size: 1rem;
    max-width: 42vw;                 /* que no empuje al resto */
    overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
  }
  .navbar nav{
    margin-left:.35rem;
    gap:.45rem;
    overflow-x:auto;                  /* ya lo tienes, lo reforzamos */
    -webkit-overflow-scrolling:touch;
    scrollbar-width:none;
    white-space:nowrap;
  }
  .navbar nav::-webkit-scrollbar{ display:none; }
  .navbar a{ padding:.38rem .5rem; font-size:.95rem; border-radius:9px; }

  /* Botón Salir / Crear / Ingresar: pasa abajo para no cortar el menú */
  .navbar .nav-auth{
    order: 3;                         /* coloca el bloque al final */
    width: 100%;
    margin-top: .25rem;
    display: flex;
    gap: .4rem;
  }
  .navbar .nav-auth .btn{
    flex: 1 1 0;                      /* se reparten el ancho */
    min-height: 40px;
    font-size: .95rem;
    justify-content: center;
  }
  .navbar .spacer{ display:none; }    /* no necesitamos el espacio en móvil */
}

/* Tablas: en 360 mejor con desplazamiento lateral */
@media (max-width: 380px){
  .table-responsive{ overflow-x:auto; }
  .table{
    min-width: 560px;                 /* fuerza scroll si hay muchas columnas */
  }
  .table th, .table td{
    padding:.52rem .55rem;
    font-size:.92rem;
  }
  .table .actions{ gap:.3rem; flex-wrap:wrap; }
  .table .actions .btn{ flex:1 1 auto; }
}

/* ====== FIX definitivo navbar 360px ====== */
@media (max-width: 380px){
  .navbar .row{
    display: flex;
    flex-wrap: wrap;
    align-items: flex-start;
    gap: .4rem;
  }

  /* 1) Brand queda a la izquierda, tamaño compacto */
  .navbar .brand{
    flex: 0 0 auto;
    font-size: 1rem;
    max-width: 42vw;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  /* 2) NAV ocupa su propia fila (100%) y hace scroll horizontal si no cabe */
  .navbar nav{
    order: 2;
    flex: 0 0 100% !important;   /* fuerza nueva fila */
    margin-left: 0 !important;
    max-width: 100%;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    white-space: nowrap;
    gap: .45rem;
  }
  .navbar nav::-webkit-scrollbar{ display:none; }
  .navbar a{ padding:.38rem .5rem; font-size:.95rem; border-radius:9px; }

  /* 3) Bloque de sesión SIEMPRE en una fila completa debajo del nav */
  .navbar .spacer{ display: none !important; }
  .navbar .nav-auth{
    order: 3;
    flex: 0 0 100% !important;   /* fila nueva */
    display: flex;
    gap: .4rem;
    margin-top: .25rem;
  }
  .navbar .nav-auth form{ display:flex; flex:1 1 0; }
  .navbar .nav-auth a,
  .navbar .nav-auth .btn{
    flex: 1 1 0;
    width: 100%;
    min-height: 40px;
    justify-content: center;
    font-size: .95rem;
  }
}

/* ===== Ajuste fino de tabla en móviles (≤400px) ===== */
@media (max-width: 400px){

  /* Contenedor de tabla: quita desbordes y añade respiración controlada */
  .table-responsive{
    overflow-x: auto;
    padding: 0; 
    margin: 0;
  }

  /* Tabla ocupa todo el ancho visible sin empujar */
  .table{
    width: 100%;
    min-width: auto;            /* anula el min-width global si existía */
    border-radius: 10px;
    border-spacing: 0;
    border-collapse: collapse;
  }

  /* Reduce padding en celdas */
  .table th, .table td{
    padding: .4rem .45rem !important;
    font-size: .93rem;
    line-height: 1.3;
    word-break: break-word;
  }

  /* Filas más compactas */
  .table tbody tr{
    border-top: 1px solid var(--border);
  }

  /* Última fila sin margen visual extra */
  .table tbody tr:last-child td{
    border-bottom: none;
  }

  /* Para el modo stacked */
  .table.table-stacked td{
    padding: .35rem 0 !important;
  }
}
